var myApp=angular.module("MeanApp",["ui.router"]);myApp.config(function(e,o){o.otherwise("/"),e.state("app",{url:"/",views:{header:{templateUrl:"view/header.html"},content:{templateUrl:"view/home.html",controller:"HomeController"},footer:{templateUrl:"view/footer.html"}}}).state("app.aboutus",{url:"aboutus",views:{"content@":{templateUrl:"view/aboutus.html",controller:"AboutUsController"}}}).state("app.login",{url:"login",views:{"content@":{templateUrl:"view/login.html",controller:"LoginController"}}}).state("app.signup",{url:"signup",views:{"content@":{templateUrl:"view/signup.html",controller:"SignupController"}}}).state("app.profile",{url:"profile",views:{"content@":{templateUrl:"view/profile.html",controller:"ProfileController"}}})}),angular.module("MeanApp").controller("HomeController",["$scope",function(e){console.log("Running HomeController")}]).controller("AboutUsController",["$scope",function(e){console.log("Running AboutusController")}]).controller("LoginController",["$scope",function(e){console.log("Running LoginController")}]).controller("SignupController",["$scope","$location","authentication",function(e,o,t){console.log("Running SignupController");var n={firstName:"",lastName:"",email:"",password:""};e.dataloading=!1,e.user=n,e.register=function(){e.dataloading=!0,t.register(n).success(function(e){console.log("Registration Successful"),o.path("/profile")}).error(function(t){console.log("Registraion failed: "+t.message),alert("Registraion failed: "+t.message),o.path("/signup"),e.dataloading=!1})}}]).controller("ProfileController",["$scope",function(e){console.log("Running ProfileController")}]),angular.module("MeanApp").constant("baseURL","http://localhost:3000/").service("authentication",["$http","baseURL","$window",function(e,o,t){console.log("Running authentication");var n={};this.setUser=function(e){n=e};var l=function(e){t.localstorage["mean-app-token"]=e};this.register=function(o){return e.post("/api/register",o).success(function(e){l(e.token)})},this.login=function(o){return e.post("/api/login",o).success(function(e){l(e.token)})},this.parseToken=function(e){var o="";return e&&(o=e.split(".")[1],o=t.atob(o),o=JSON.parse(o)),o},this.isLoggedIn=function(){var e=getToken(),o=parseToken(e);return!!o&&o.exp>Date.now()/1e3},this.getUser=function(){var e=getToken(),o=parseToken(e);return o?{firstName:o.firstName,lastName:o.lastName,email:o.email}:{firstName:"",lastName:"",email:""}},this.getToken=function(e){return t.localstorage["mean-app-token"]},this.removeToken=function(){t.localstorage.removeItem("mean-app-token")},this.logout=function(){removeToken()}}]);