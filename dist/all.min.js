var myApp=angular.module("MeanApp",["ui.router"]);myApp.config(function(o,e){e.otherwise("/"),o.state("app",{url:"/",views:{header:{templateUrl:"view/header.html"},content:{templateUrl:"view/home.html",controller:"HomeController"},footer:{templateUrl:"view/footer.html"}}}).state("app.aboutus",{url:"aboutus",views:{"content@":{templateUrl:"view/aboutus.html",controller:"AboutUsController"}}}).state("app.login",{url:"login",views:{"content@":{templateUrl:"view/login.html",controller:"LoginController"}}}).state("app.signup",{url:"signup",views:{"content@":{templateUrl:"view/signup.html",controller:"SignupController"}}}).state("app.profile",{url:"profile",views:{"content@":{templateUrl:"view/profile.html",controller:"ProfileController"}}})}),angular.module("MeanApp").controller("HomeController",["$scope",function(o){console.log("Running HomeController")}]).controller("AboutUsController",["$scope",function(o){console.log("Running AboutusController")}]).controller("LoginController",["$scope",function(o){console.log("Running LoginController")}]).controller("SignupController",["$scope","$location","authentication",function(o,e,t){console.log("Running SignupController");var n={firstName:"",lastName:"",email:"",password:""};o.dataloading=!1,o.user=n,o.register=function(){o.dataloading=!0,t.register(n).success(function(o){console.log("Registration Successful"),e.path("/profile")}).error(function(e){console.log("Registraion failed: "+e.message),o.dataloading=!1})}}]).controller("ProfileController",["$scope",function(o){console.log("Running ProfileController")}]),angular.module("MeanApp").service("authentication",["$http","$window",function(o,e){console.log("Running authentication");var t={},n=function(o){t=o},l=function(o){return e.localStorage["mean-app-token"]},r=function(){e.localStorage.removeItem("mean-app-token")},i=function(o){e.localStorage["mean-app-token"]=o},a=function(e){return console.log(e),o.post("/api/register",e).success(function(o){console.log("data is "+o),i(o.token)})},s=function(e){return o.post("/api/login",e).success(function(o){i(o.token)})},u=function(o){var t="";return o&&(t=o.split(".")[1],t=e.atob(t),t=JSON.parse(t)),t},c=function(){var o=l(),e=u(o);return!!e&&e.exp>Date.now()/1e3},p=function(){var o=l(),e=u(o);return e?{firstName:e.firstName,lastName:e.lastName,email:e.email}:{firstName:"",lastName:"",email:""}};this.setUser=n,this.getToken=l,this.removeToken=r,this.saveToken=i,this.register=a,this.login=s,this.parseToken=u,this.isLoggedIn=c,this.getUser=p}]);